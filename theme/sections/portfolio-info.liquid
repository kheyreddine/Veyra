{% comment %} 
      Portfolio Info Section - Developer Showcase 
      - Business Problem: Clients need to see developer's expertise and credentials 
      - Solution: Professional portfolio section with bio, photo, and action buttons 
      - Client Value: Demonstrates developer's skills and provides easy access to credentials 
      - Technical Achievement: Responsive two-column layout with smooth animations 
{% endcomment %}

<!-- Import portfolio-info-specific styles -->
{{ 'portfolio-info.css' | asset_url | stylesheet_tag }}

<section class="portfolio-info" id="portfolio-info">
  <div class="container">

    <!-- Section Header -->
    <div class="portfolio-info__header">
      <h2 class="portfolio-info__title">
        {% if section.settings.title != blank %}
          {{ section.settings.title }}
        {% else %}
          About the Developer
        {% endif %}
      </h2>
    </div>

    <!-- Two-Column Layout -->
    <div class="portfolio-info__content">

      <!-- Left Column: Bio Content -->
      <div class="portfolio-info__bio-column">
        <h3 class="portfolio-info__headline">
          {% if section.settings.headline != blank %}
            {{ section.settings.headline }}
          {% else %}
            Kheyreddine Hadri
          {% endif %}
        </h3>

        <div class="portfolio-info__bio">
          {% if section.settings.bio_text != blank %}
            {{ section.settings.bio_text }}
          {% else %}
            Kheyreddine Hadri is a Frontend & Shopify Developer with 4+ years of experience building responsive, high-performing websites. Skilled in Shopify (themes, apps, Liquid, GraphQL APIs), Webflow, and Angular, with a strong focus on performance, SEO, and user experience. I combine technical expertise with design sensitivity to deliver e-commerce solutions that look beautiful and scale.
          {% endif %}
        </div>
      </div>

      <!-- Right Column: Photo and Action Buttons -->
      <div class="portfolio-info__action-column">

        <!-- Developer Photo -->
        <div class="portfolio-info__photo">
          {% if section.settings.developer_image != blank %}
            <img
              src="{{ section.settings.developer_image | image_url: width: 200 }}"
              alt="Kheyreddine Hadri - Frontend & Shopify Developer"
              loading="lazy"
              width="200"
              height="200">
          {% else %}
            <!-- Professional placeholder avatar -->
            <div class="portfolio-info__photo-placeholder">
              <svg
                width="200"
                height="200"
                viewBox="0 0 200 200"
                fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <circle
                  cx="100"
                  cy="100"
                  r="100"
                  fill="#f0f0f0" />
                <circle
                  cx="100"
                  cy="80"
                  r="30"
                  fill="#cccccc" />
                <path d="M60 140c0-22.091 17.909-40 40-40s40 17.909 40 40" fill="#cccccc" />
              </svg>
            </div>
          {% endif %}
        </div>

        <!-- Action Buttons -->
        <div class="portfolio-info__actions">

          <!-- Resume Download Button -->
          <a
            href="#"
            class="portfolio-info__button portfolio-info__button--resume"
            onclick="downloadResume(); return false;">
            <span class="portfolio-info__button-icon">ðŸ“„</span>
            <span class="portfolio-info__button-text">Download Resume</span>
          </a>

          <!-- GitHub Repository Button -->
          <a
            href="{% if section.settings.github_link != blank %}{{ section.settings.github_link }}{% else %}https://github.com/kheyreddine/Veyra{% endif %}"
            class="portfolio-info__button portfolio-info__button--github"
            target="_blank"
            rel="noopener noreferrer">
            <span class="portfolio-info__button-icon">ðŸ’»</span>
            <span class="portfolio-info__button-text">View GitHub Repo</span>
          </a>

        </div>

      </div>

    </div>

  </div>
</section>

<script>
  function downloadResume() {
  // Try multiple methods to download the resume
  const resumeUrl = '{{ "Kheyreddine_Hadri_Resume.pdf" | asset_url }}';
  
  console.log('Attempting to download resume from:', resumeUrl);
  
  // Method 1: Fetch and create blob download (most reliable)
  fetch(resumeUrl)
    .then(response => {
      console.log('Response status:', response.status);
      console.log('Response headers:', response.headers);
      
      if (response.ok) {
        return response.blob();
      }
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    })
    .then(blob => {
      console.log('Blob received:', blob.type, blob.size);
      
      // Create download link
      const url = window.URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'Kheyreddine_Hadri_Resume.pdf';
      link.style.display = 'none';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      window.URL.revokeObjectURL(url);
      
      console.log('Download initiated successfully');
    })
    .catch(error => {
      console.error('Error downloading resume:', error);
      
      // Fallback: Try direct download
      const link = document.createElement('a');
      link.href = resumeUrl;
      link.download = 'Kheyreddine_Hadri_Resume.pdf';
      link.target = '_blank';
      link.style.display = 'none';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      // Final fallback: Open in new tab
      setTimeout(() => {
        window.open(resumeUrl, '_blank');
      }, 100);
    });
  }
</script>

{% schema %}
  {
    "name": "Portfolio Info",
    "tag": "section",
    "class": "section",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Section Title",
        "default": "About the Developer"
      },
      {
        "type": "text",
        "id": "headline",
        "label": "Developer Name",
        "default": "Kheyreddine Hadri"
      },
      {
        "type": "textarea",
        "id": "bio_text",
        "label": "Developer Bio",
        "default": "Kheyreddine Hadri is a Frontend & Shopify Developer with 4+ years of experience building responsive, high-performing websites. Skilled in Shopify (themes, apps, Liquid, GraphQL APIs), Webflow, and Angular, with a strong focus on performance, SEO, and user experience. I combine technical expertise with design sensitivity to deliver e-commerce solutions that look beautiful and scale."
      },
      {
        "type": "image_picker",
        "id": "developer_image",
        "label": "Developer Photo"
      }, {
        "type": "text",
        "id": "resume_link",
        "label": "Resume Download Link"
      }, {
        "type": "text",
        "id": "github_link",
        "label": "GitHub Repository Link"
      }
    ],
    "presets": [
      {
        "name": "Portfolio Info",
        "category": "Developer"
      }
    ]
  }
{% endschema %}